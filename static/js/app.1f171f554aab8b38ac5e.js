webpackJsonp([1],{"2TvF":function(t,a){},FbI3:function(t,a){},Kd1X:function(t,a){},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("7+uW"),r=e("Dd8w"),i=e.n(r),n=e("Xxa5"),c=e.n(n),o=e("exGp"),l=e.n(o),u=e("NYxO"),p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"top-bar-wrapper"},[e("div",{staticClass:"top-bar"},[e("div",{staticClass:"left-menu",on:{click:t.showMenu}},[e("i",{staticClass:"fas fa-bars"}),t._v(" "),e("ul",{ref:"nav",staticClass:"nav"},[e("li",[e("router-link",{attrs:{to:"/playlists/new_hits_playlists"}},[t._v("熱門歌單")])],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"/playlists/charts"}},[t._v("最新排行")])],1)])]),t._v(" "),e("div",{staticClass:"logo",on:{click:t.closeMenu}},[e("router-link",{attrs:{to:"/index"}},[e("h1",[t._v("I Listen")])])],1),t._v(" "),e("div",{staticClass:"search",on:{click:t.closeMenu}},[e("router-link",{attrs:{to:"/search"}},[e("i",{staticClass:"fas fa-search"})])],1)])])},staticRenderFns:[]};var h={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"footer"},[a("div",{staticClass:"copyright"},[this._v("Copyright © 2020 Luca.")])])}]};var d={components:{TopBar:e("VU/8")({methods:{showMenu:function(){this.$refs.nav.classList.toggle("nav-active")},closeMenu:function(){this.$refs.nav.classList.remove("nav-active")}}},p,!1,function(t){e("uXZ7")},null,null).exports,Footer:e("VU/8")({},h,!1,function(t){e("dHFL")},null,null).exports},created:function(){var t=this;return l()(c.a.mark(function a(){return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.reqAccessToken();case 2:return a.next=4,t.reqCharts();case 4:t.reqTodaySuggest(),t.reqNewHitsPlaylists();case 6:case"end":return a.stop()}},a,t)}))()},methods:i()({},Object(u.b)(["reqAccessToken","reqTodaySuggest","reqNewHitsPlaylists","reqCharts"])),computed:i()({},Object(u.c)(["access_token","todaySong","minCharts"]))},v={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("TopBar"),this._v(" "),a("router-view"),this._v(" "),a("Footer")],1)},staticRenderFns:[]};var m,f=e("VU/8")(d,v,!1,function(t){e("FbI3")},null,null).exports,_=e("1nuA"),y=e.n(_),g=e("mtWM"),w=e.n(g),k="REQACCESSTOKEN",C="REQNEWHITSPLAYLISTS",S="REQCHARTS",b="REQTODAYSUGGEST",x="SEARCHKKBOX",D="REQLISTTRACKS",T="REQYOUTUBEDATA",$="CLEARYT",E={reqAccessToken:function(t){var a=this,e=t.commit;return l()(c.a.mark(function t(){var s,r,i,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={headers:{"Content-Type":"application/x-www-form-urlencoded"}},r={grant_type:"client_credentials",client_id:"cdfb31a6f5ab47635e32c8af8d98bf82",client_secret:"f27fc4e513664f808ed114f0fa04aae6"},i="https://cors-anywhere.herokuapp.com/",n="https://account.kkbox.com/oauth2/token",t.next=6,w.a.post(""+i+n,y.a.stringify(r),s).then(function(t){var a=t.data.access_token;e(k,{access_token:a})});case 6:case"end":return t.stop()}},t,a)}))()},reqNewHitsPlaylists:function(t){var a=t.commit,e={headers:{Authorization:"Bearer "+t.state.access_token},params:{territory:"TW"}};w.a.get("https://api.kkbox.com/v1.1/new-hits-playlists",e).then(function(t){var e=t.data;a(C,{new_hits_playlists:e})})},reqCharts:function(t){var a=this,e=t.commit,s=t.state;return l()(c.a.mark(function t(){var r,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{Authorization:"Bearer "+s.access_token},params:{territory:"TW"}},i="https://api.kkbox.com/v1.1/charts",t.next=4,w.a.get(i,r).then(function(t){var a=t.data;e(S,{charts:a})});case 4:case"end":return t.stop()}},t,a)}))()},reqTodaySuggest:function(t){var a=t.commit,e=t.state,s=new Date,r={headers:{Authorization:"Bearer "+e.access_token},params:{territory:"TW",limit:1,offset:s.getDate()}},i="https://api.kkbox.com/v1.1/charts/"+e.charts.data[0].id+"/tracks";w.a.get(i,r).then(function(t){var e=t.data.data[0].id;a(b,{todaySong:e})})},searchKKBOX:function(t,a){var e=this,s=t.commit,r=t.state;return l()(c.a.mark(function t(){var i,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={headers:{Authorization:"Bearer "+r.access_token},params:{q:a,type:"track, playlist",territory:"TW",limit:20}},n="https://api.kkbox.com/v1.1/search",t.next=4,w.a.get(n,i).then(function(t){var a=t.data;s(x,{searchData:a})});case 4:case"end":return t.stop()}},t,e)}))()},reqListTracks:function(t,a){var e=this,s=t.commit,r=t.state,i=a.type,n=a.platlistId;return l()(c.a.mark(function t(){var a,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"Bearer "+r.access_token},params:{territory:"TW",limit:25}},o="https://api.kkbox.com/v1.1/"+i+"/"+n+"/tracks",t.next=4,w.a.get(o,a).then(function(t){var a=t.data;s(D,{musicAry:a});var e="https://www.googleapis.com/youtube/v3/search?key=AIzaSyDNysPuu6fPIBdEdmH-7yB1-GHacrPviLQ&part=snippet&type=video&q="+a.data[0].album.artist.name+" "+a.data[0].name;w.a.get(e).then(function(t){var a=t.data;s(T,{ytData:a})})});case 4:case"end":return t.stop()}},t,e)}))()},reqYoutubeData:function(t,a){var e=t.commit,s="https://www.googleapis.com/youtube/v3/search?key=AIzaSyDNysPuu6fPIBdEdmH-7yB1-GHacrPviLQ&part=snippet&type=video&q="+a;w.a.get(s).then(function(t){var a=t.data;e(T,{ytData:a})})},clearYT:function(t){(0,t.commit)($)}},R=e("bOdI"),I=e.n(R),A=(m={},I()(m,k,function(t,a){var e=a.access_token;t.access_token=e}),I()(m,C,function(t,a){var e=a.new_hits_playlists;t.new_hits_playlists=e}),I()(m,S,function(t,a){var e=a.charts;t.charts=e,t.minCharts=e.data.slice(0,4)}),I()(m,b,function(t,a){var e=a.todaySong;t.todaySong=e}),I()(m,x,function(t,a){var e=a.searchData;t.searchData=e}),I()(m,D,function(t,a){var e=a.musicAry;t.musicAry=e}),I()(m,T,function(t,a){var e=a.ytData;t.ytData=e}),I()(m,$,function(t){t.ytData={}}),m);s.a.use(u.a);var F=new u.a.Store({state:{access_token:"QoBMoxDQB-YmRkD5AB37Bg==",new_hits_playlists:{},charts:{},todaySong:"",minCharts:[],searchData:{},musicAry:[],ytData:{}},getters:{},actions:E,mutations:A}),B=e("/ocq"),q={props:{data:Object},computed:{title:function(){return this.data.title.trim().substr(0,6)}}},O={render:function(){var t=this.$createElement,a=this._self._c||t;return a("router-link",{attrs:{to:"/player/list/new-hits-playlists/"+this.data.id}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-img"},[a("img",{attrs:{src:""+this.data.images[0].url,alt:""}})]),this._v(" "),a("div",{staticClass:"card-title"},[a("h2",[this._v(this._s(this.title))])])])])},staticRenderFns:[]};var P=e("VU/8")(q,O,!1,function(t){e("kWN3")},null,null).exports,N={props:{data:Object}},U={render:function(){var t=this.$createElement,a=this._self._c||t;return a("router-link",{attrs:{to:"/player/list/charts/"+this.data.id}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-img"},[a("img",{attrs:{src:""+this.data.images[0].url,alt:""}})]),this._v(" "),a("div",{staticClass:"card-title"},[a("h2",[this._v(this._s(this.data.title))])])])])},staticRenderFns:[]};var V=e("VU/8")(N,U,!1,function(t){e("QePj")},null,null).exports,H={computed:i()({},Object(u.c)(["new_hits_playlists","todaySong","minCharts"])),components:{NewHits:P,Charts:V}},L={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._m(0),t._v(" "),e("div",{staticClass:"today-suggest"},[t._m(1),t._v(" "),t.todaySong?e("iframe",{attrs:{src:"https://widget.kkbox.com/v1/?id="+t.todaySong+"&type=song&terr=TW&lang=TC&autoplay=true",allow:"autoplay"}}):t._e()]),t._v(" "),e("div",{staticClass:"playlists"},[e("div",{staticClass:"pl-header"},[e("h2",[t._v("最新熱門歌單")]),t._v(" "),e("router-link",{attrs:{to:"/playlists/new_hits_playlists"}},[e("span",[t._v("More +")])])],1),t._v(" "),e("div",{staticClass:"pl-cards"},t._l(t.new_hits_playlists.data,function(t,a){return e("NewHits",{key:a,attrs:{data:t}})}),1),t._v(" "),e("div",{staticClass:"pl-header"},[e("h2",[t._v("最新排行榜")]),t._v(" "),e("router-link",{attrs:{to:"/playlists/charts"}},[e("span",[t._v("More +")])])],1),t._v(" "),e("div",{staticClass:"pl-cards"},t._l(t.minCharts,function(t,a){return e("Charts",{key:a,attrs:{data:t}})}),1)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"banner"},[a("img",{attrs:{src:e("veyg"),alt:""}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"ts-header"},[a("h2",[this._v("今日推薦")])])}]};var j=e("VU/8")(H,L,!1,function(t){e("Qnnz")},null,null).exports,K={props:{title:String,name:String,imgSrc:String},methods:{changeSong:function(){this.$store.dispatch("reqYoutubeData",this.name+this.title)}}},Q={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",[e("a",{attrs:{href:"javascript:;"},on:{click:t.changeSong}},[e("img",{attrs:{src:""+t.imgSrc,alt:""}}),t._v(" "),e("div",{staticClass:"music-detail"},[e("h2",[t._v(t._s(t.title))]),t._v(" "),e("span",[t._v(t._s(t.name))])])])])},staticRenderFns:[]};var M=e("VU/8")(K,Q,!1,function(t){e("Rr6I")},null,null).exports,X={components:{PlayerItem:M},created:function(){var t=this.$route.params.type,a=this.$route.params.platlistId;this.$store.dispatch("reqListTracks",{type:t,platlistId:a})},computed:i()({},Object(u.c)(["ytData","musicAry"])),destroyed:function(){this.$store.dispatch("clearYT")}},Y={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"player-wrapper"},[t.ytData.items?e("div",{staticClass:"player"},[e("iframe",{attrs:{id:"ytplayer",type:"text/html",src:"https://www.youtube.com/embed/"+t.ytData.items[0].id.videoId}}),t._v(" "),e("div",{staticClass:"player-description"},[e("h2",[t._v(t._s(t.ytData.items[0].snippet.title))]),t._v(" "),e("p",[t._v(t._s(t.ytData.items[0].snippet.channelTitle))]),t._v(" "),e("p",[t._v(t._s(t.ytData.items[0].snippet.description))])])]):t._e(),t._v(" "),e("div",{staticClass:"waiting-list"},[t._m(0),t._v(" "),e("ul",{staticClass:"wl-body"},t._l(t.musicAry.data,function(t,a){return e("PlayerItem",{key:a,attrs:{title:t.name,name:t.album.artist.name,imgSrc:t.album.images[1].url}})}),1)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"wl-header"},[a("h2",[this._v("播放清單")])])}]};var W=e("VU/8")(X,Y,!1,function(t){e("V96R")},null,null).exports,z={props:{playlist:Object},computed:{description:function(){var t=this.playlist.description;return t.length>20&&(t=t.substr(0,20)+"..."),t},playlistsType:function(){return this.$route.params.playlistsType.replace(/_/gi,"-")}}},G={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("router-link",{attrs:{to:"/player/list/"+t.playlistsType+"/"+t.playlist.id}},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-img"},[e("img",{attrs:{src:""+t.playlist.images[0].url,alt:""}})]),t._v(" "),e("div",{staticClass:"card-text"},[e("div",{staticClass:"card-title"},[e("h2",[t._v(t._s(t.playlist.title))])]),t._v(" "),e("div",{staticClass:"card-description"},[e("span",[t._v(t._s(t.description))])])])])])},staticRenderFns:[]};var Z={new_hits_playlists:"最新熱門歌單",charts:"最新排行榜"},J={components:{PlaylistItem:e("VU/8")(z,G,!1,function(t){e("Kd1X")},null,null).exports},computed:{playlistsData:function(){var t=this.$route.params.playlistsType;return this.$store.state[t].data},playlistTitle:function(){var t=this.$route.params.playlistsType;return Z[t]}}},tt={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"playlists2"},[a("div",{staticClass:"pl-header"},[a("h2",[this._v(this._s(this.playlistTitle))])]),this._v(" "),a("div",{staticClass:"pl-cards"},this._l(this.playlistsData,function(t,e){return a("PlaylistItem",{key:e,attrs:{playlist:t}})}),1)])},staticRenderFns:[]};var at=e("VU/8")(J,tt,!1,function(t){e("efGJ")},null,null).exports,et={data:function(){return{searchStr:"",showContent:!1}},methods:{searchKKBOX:function(){var t=this;return l()(c.a.mark(function a(){var e;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=t.searchStr){a.next=4;break}return alert("請輸入文字"),a.abrupt("return");case 4:return a.next=6,t.$store.dispatch("searchKKBOX",e);case 6:t.showContent=!0,t.$router.push("/search/tracks");case 8:case"end":return a.stop()}},a,t)}))()}}},st={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"search-header"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStr,expression:"searchStr"}],attrs:{placeholder:"你今天聽音樂了嗎? I Listen",maxlength:"100"},domProps:{value:t.searchStr},on:{input:function(a){a.target.composing||(t.searchStr=a.target.value)}}}),t._v(" "),e("button",{on:{click:t.searchKKBOX}},[t._v("搜尋")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showContent,expression:"showContent"}],staticClass:"search-main"},[e("ul",{staticClass:"search-main-nav"},[e("li",[e("router-link",{attrs:{to:"/search/tracks"}},[t._v("歌曲")])],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"/search/playlists"}},[t._v("歌單")])],1)]),t._v(" "),e("div",{staticClass:"search-content player-wrapper"},[e("div",{staticClass:"waiting-list"},[e("router-view")],1)])])])},staticRenderFns:[]};var rt=e("VU/8")(et,st,!1,function(t){e("eM0N")},null,null).exports,it={props:{title:String,name:String,imgSrc:String,type:String,id:String,type2:String}},nt={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("router-link",{attrs:{to:"/player/"+t.type2+"/"+t.type+"/"+t.id}},[e("li",[e("a",{attrs:{href:"javascript:;"}},[e("img",{attrs:{src:""+t.imgSrc,alt:""}}),t._v(" "),e("div",{staticClass:"music-detail"},[e("h2",[t._v(t._s(t.title))]),t._v(" "),e("span",[t._v(t._s(t.name))])])])])])},staticRenderFns:[]};var ct=e("VU/8")(it,nt,!1,function(t){e("ksrX")},null,null).exports,ot={computed:{tracks:function(){return this.$store.state.searchData.tracks.data}},components:{ShowSearch:ct}},lt={render:function(){var t=this.$createElement,a=this._self._c||t;return a("ul",{staticClass:"wl-body"},this._l(this.tracks,function(t,e){return a("ShowSearch",{key:e,attrs:{title:t.name,name:t.album.artist.name,imgSrc:t.album.images[1].url,type:e.toString(),type2:"track",id:t.id}})}),1)},staticRenderFns:[]};var ut=e("VU/8")(ot,lt,!1,function(t){e("otCs")},null,null).exports,pt={computed:{playlists:function(){return this.$store.state.searchData.playlists.data}},components:{ShowSearch:ct}},ht={render:function(){var t=this.$createElement,a=this._self._c||t;return a("ul",{staticClass:"wl-body"},this._l(this.playlists,function(t,e){return a("ShowSearch",{key:e,attrs:{title:t.title,type:"charts",type2:"list",id:t.id,name:"By "+t.owner.name,imgSrc:t.images[1].url}})}),1)},staticRenderFns:[]};var dt=e("VU/8")(pt,ht,!1,function(t){e("2TvF")},null,null).exports,vt={components:{PlayerItem:M},created:function(){this.$store.dispatch("reqYoutubeData",this.songDetail.album.artist.name+this.songDetail.name)},computed:i()({},Object(u.c)(["ytData","searchData"]),{songDetail:function(){var t=1*this.$route.params.type;return this.searchData.tracks.data[t]}}),destroyed:function(){this.$store.dispatch("clearYT")}},mt={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"player-wrapper"},[t.ytData.items?e("div",{staticClass:"player"},[e("iframe",{attrs:{id:"ytplayer",type:"text/html",src:"https://www.youtube.com/embed/"+t.ytData.items[0].id.videoId}}),t._v(" "),e("div",{staticClass:"player-description"},[e("h2",[t._v(t._s(t.ytData.items[0].snippet.title))]),t._v(" "),e("p",[t._v(t._s(t.ytData.items[0].snippet.channelTitle))]),t._v(" "),e("p",[t._v(t._s(t.ytData.items[0].snippet.description))])])]):t._e(),t._v(" "),e("div",{staticClass:"waiting-list"},[t._m(0),t._v(" "),e("ul",{staticClass:"wl-body"},[e("PlayerItem",{attrs:{title:t.songDetail.name,name:t.songDetail.album.artist.name,imgSrc:t.songDetail.album.images[1].url}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"wl-header"},[a("h2",[this._v("播放清單")])])}]};var ft=e("VU/8")(vt,mt,!1,function(t){e("RiDt")},null,null).exports;s.a.use(B.a);var _t=new B.a({routes:[{path:"/index",component:j},{path:"/player/list/:type/:platlistId",component:W},{path:"/player/track/:type/:platlistId",component:ft},{path:"/playlists",component:at,children:[{path:":playlistsType",component:at}]},{path:"/search",component:rt,children:[{path:"tracks",component:ut},{path:"playlists",component:dt}]},{path:"/",redirect:"/index"}]});e("xsZ7"),e("Z/EI"),e("OGwZ");new s.a({el:"#app",render:function(t){return t(f)},store:F,router:_t})},OGwZ:function(t,a){},QePj:function(t,a){},Qnnz:function(t,a){},RiDt:function(t,a){},Rr6I:function(t,a){},V96R:function(t,a){},"Z/EI":function(t,a){},dHFL:function(t,a){},eM0N:function(t,a){},efGJ:function(t,a){},kWN3:function(t,a){},ksrX:function(t,a){},otCs:function(t,a){},uXZ7:function(t,a){},veyg:function(t,a,e){t.exports=e.p+"static/img/banner.cfa4069.jpg"},xsZ7:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.1f171f554aab8b38ac5e.js.map